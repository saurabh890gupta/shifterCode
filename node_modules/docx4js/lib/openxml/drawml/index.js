"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _part = require("../part");

var _part2 = _interopRequireDefault(_part);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }

exports.default = function (od) {
    return _extends({
        filter: ":not(a\\:extLst)",
        id: function id() {
            return undefined;
        }
    }, same("latin,ea,cs".split(","), function (_ref) {
        var _ref$attribs$typeface = _ref.attribs.typeface,
            typeface = _ref$attribs$typeface === undefined ? "" : _ref$attribs$typeface;
        return od.theme.font(typeface);
    }), same("lumMod,lumOff,tint,shade".split(","), function (_ref2) {
        var val = _ref2.attribs.val;
        return parseInt(val) / 100000;
    }), {
        tidy_schemeClr: function tidy_schemeClr(_ref3) {
            var val = _ref3.val,
                effect = _objectWithoutProperties(_ref3, ["val"]);

            return od.doc.asColor(od.theme.color(val), effect);
        },
        tidy_srgbClr: function tidy_srgbClr(_ref4) {
            var val = _ref4.val,
                effect = _objectWithoutProperties(_ref4, ["val"]);

            return od.doc.asColor(val, effect);
        },
        sysClr: function sysClr(_ref5) {
            var val = _ref5.attribs.val;
            return val;
        },
        tidy_solidFill: function tidy_solidFill(_ref6) {
            var color = _ref6.color;
            return color;
        },
        rot: function rot(v) {
            return parseInt(v) / 60000;
        },

        blip: function blip(n) {
            var _n$attribs = n.attribs,
                embed = _n$attribs["r:embed"],
                url = _n$attribs["r:link"];

            if (url) return { url: url };
            var part = od.$(n).part();
            return new _part2.default(part, od.doc).getRel(embed);
        },

        prstGeom: function prstGeom(x) {
            return x.attribs.prst;
        },
        pathLst: function pathLst(_ref7) {
            var children = _ref7.children;

            var px = function px(x) {
                return od.doc.emu2Px(x);
            };
            return children.filter(function (a) {
                return a.name == "a:path";
            }).reduce(function (d, path) {
                path.children.filter(function (a) {
                    return a.name;
                }).forEach(function (a) {
                    switch (a.name.split(":").pop()) {
                        case 'moveTo':
                            d.push('M ' + px(a.children[0].attribs.x) + ' ' + px(a.children[0].attribs.y));
                            break;
                        case 'lnTo':
                            d.push('L ' + px(a.children[0].attribs.x) + ' ' + px(a.children[0].attribs.y));
                            break;
                            break;
                        case 'cubicBezTo':
                            d.push('L ' + px(a.children[0].attr('x')) + ' ' + px(a.children[0].attr('y')));
                            d.push('Q ' + px(a.children[1].attr('x')) + ' ' + px(a.children[1].attr('y')) + ' ' + px(a.children[2].attr('x')) + ' ' + px(a.children[2].attr('y')));
                            break;
                        case 'arcTo':
                            d.push("A");
                            break;
                        case 'close':
                            d.push('Z');
                            break;
                    }
                });
                return d;
            }, []).join(" ");
        },

        tidy_custGeom: function tidy_custGeom(_ref8) {
            var pathLst = _ref8.pathLst;
            return pathLst;
        },

        lvl: function lvl(v) {
            return parseInt(v);
        },
        spcPts: function spcPts(_ref9) {
            var val = _ref9.attribs.val;
            return od.doc.pt2Px(parseInt(val) / 100);
        },
        tidy_spcAft: function tidy_spcAft(_ref10) {
            var a = _ref10.spcPts;
            return a;
        },
        tidy_spcBef: function tidy_spcBef(_ref11) {
            var a = _ref11.spcPts;
            return a;
        },

        buFont: function buFont(_ref12) {
            var typeface = _ref12.attribs.typeface;
            return typeface;
        },
        buChar: function buChar(_ref13) {
            var char = _ref13.attribs.char;
            return char;
        },
        buSzPts: function buSzPts(_ref14) {
            var val = _ref14.attribs.val;
            return od.doc.pt2Px(parseInt(val) / 100);
        },
        buSzPct: function buSzPct(_ref15) {
            var val = _ref15.attribs.val;
            return parseInt(val) / 1000 / 100;
        },
        buAutoNum: function buAutoNum(_ref16) {
            var attribs = _ref16.attribs;
            return _extends({}, attribs);
        },
        tidy_buClr: function tidy_buClr(_ref17) {
            var color = _ref17.color;
            return color;
        },

        indent: function indent(v) {
            return od.doc.emu2Px(v);
        },
        marL: function marL(v) {
            return od.doc.emu2Px(v);
        },

        ext: function ext(_ref18) {
            var _ref18$attribs = _ref18.attribs,
                cx = _ref18$attribs.cx,
                cy = _ref18$attribs.cy;
            return { width: od.doc.emu2Px(cx), height: od.doc.emu2Px(cy) };
        },
        off: function off(_ref19) {
            var _ref19$attribs = _ref19.attribs,
                x = _ref19$attribs.x,
                y = _ref19$attribs.y;
            return { x: od.doc.emu2Px(x), y: od.doc.emu2Px(y) };
        },
        tidy_xfrm: function tidy_xfrm(_ref20) {
            var _ref20$ext = _ref20.ext,
                ext = _ref20$ext === undefined ? {} : _ref20$ext,
                _ref20$off = _ref20.off,
                off = _ref20$off === undefined ? {} : _ref20$off,
                transform = _objectWithoutProperties(_ref20, ["ext", "off"]);

            return _extends({}, ext, off, transform);
        }

    }, same("ln,lnB,lnR,lnL,lnT,lnTlToBr,lnBlToTr".split(",").map(function (a) {
        return 'tidy_' + a;
    }), function (_ref21) {
        var w = _ref21.w,
            props = _objectWithoutProperties(_ref21, ["w"]);

        return _extends({}, props, { w: od.doc.emu2Px(w) });
    }), same("left,right,top,bottom".split(",").map(function (a) {
        return 'tidy_' + a;
    }), function (_ref22) {
        var ln = _ref22.ln;
        return ln;
    }), {
        tidy_tcTxStyle: function tidy_tcTxStyle(_ref23) {
            var color = _ref23.color,
                props = _objectWithoutProperties(_ref23, ["color"]);

            return _extends({}, props, { solidFill: color });
        },

        tidy_lnRef: function tidy_lnRef(_ref24) {
            var idx = _ref24.idx,
                ph = _objectWithoutProperties(_ref24, ["idx"]);

            return od.theme.lnRef(idx, ph);
        },
        tidy_fillRef: function tidy_fillRef(_ref25) {
            var idx = _ref25.idx,
                ph = _objectWithoutProperties(_ref25, ["idx"]);

            return od.theme.fillRef(idx, ph);
        },
        tidy_EffectRef: function tidy_EffectRef(_ref26) {
            var idx = _ref26.idx,
                ph = _objectWithoutProperties(_ref26, ["idx"]);

            return od.theme.effectRef(idx, ph);
        },
        tidy_fontRef: function tidy_fontRef(_ref27) {
            var idx = _ref27.idx,
                ph = _objectWithoutProperties(_ref27, ["idx"]);

            return od.theme.fontRef(idx, ph);
        },

        names: {
            schemeClr: "color", srgbClr: "color", sysClr: "color",
            prstGeom: "geometry", custGeom: "geometry",
            lnB: "bottom", lnR: "right", lnL: "left", lnT: "top",
            rot: "rotate"
        }
    });
};

var same = function same(keys, fx) {
    return keys.reduce(function (fs, k) {
        return fs[k] = fx, fs;
    }, {});
};
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9vcGVueG1sL2RyYXdtbC9pbmRleC5qcyJdLCJuYW1lcyI6WyJmaWx0ZXIiLCJpZCIsInVuZGVmaW5lZCIsInNhbWUiLCJzcGxpdCIsImF0dHJpYnMiLCJ0eXBlZmFjZSIsIm9kIiwidGhlbWUiLCJmb250IiwidmFsIiwicGFyc2VJbnQiLCJ0aWR5X3NjaGVtZUNsciIsImVmZmVjdCIsImRvYyIsImFzQ29sb3IiLCJjb2xvciIsInRpZHlfc3JnYkNsciIsInN5c0NsciIsInRpZHlfc29saWRGaWxsIiwicm90IiwidiIsImJsaXAiLCJuIiwiZW1iZWQiLCJ1cmwiLCJwYXJ0IiwiJCIsImdldFJlbCIsInByc3RHZW9tIiwieCIsInByc3QiLCJwYXRoTHN0IiwiY2hpbGRyZW4iLCJweCIsImVtdTJQeCIsImEiLCJuYW1lIiwicmVkdWNlIiwiZCIsInBhdGgiLCJmb3JFYWNoIiwicG9wIiwicHVzaCIsInkiLCJhdHRyIiwiam9pbiIsInRpZHlfY3VzdEdlb20iLCJsdmwiLCJzcGNQdHMiLCJwdDJQeCIsInRpZHlfc3BjQWZ0IiwidGlkeV9zcGNCZWYiLCJidUZvbnQiLCJidUNoYXIiLCJjaGFyIiwiYnVTelB0cyIsImJ1U3pQY3QiLCJidUF1dG9OdW0iLCJ0aWR5X2J1Q2xyIiwiaW5kZW50IiwibWFyTCIsImV4dCIsImN4IiwiY3kiLCJ3aWR0aCIsImhlaWdodCIsIm9mZiIsInRpZHlfeGZybSIsInRyYW5zZm9ybSIsIm1hcCIsInciLCJwcm9wcyIsImxuIiwidGlkeV90Y1R4U3R5bGUiLCJzb2xpZEZpbGwiLCJ0aWR5X2xuUmVmIiwiaWR4IiwicGgiLCJsblJlZiIsInRpZHlfZmlsbFJlZiIsImZpbGxSZWYiLCJ0aWR5X0VmZmVjdFJlZiIsImVmZmVjdFJlZiIsInRpZHlfZm9udFJlZiIsImZvbnRSZWYiLCJuYW1lcyIsInNjaGVtZUNsciIsInNyZ2JDbHIiLCJjdXN0R2VvbSIsImxuQiIsImxuUiIsImxuTCIsImxuVCIsImtleXMiLCJm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LEdBQUdDLEtBQUgsQ0FBUzJFLFNBQVQsQ0FBbUJOLEdBQW5CLEVBQXVCQyxFQUF2QixDQUFmO0FBQUEsU0FoRko7QUFpRlhNLHNCQUFhO0FBQUEsZ0JBQUVQLEdBQUYsVUFBRUEsR0FBRjtBQUFBLGdCQUFTQyxFQUFUOztBQUFBLG1CQUFldkUsR0FBR0MsS0FBSCxDQUFTNkUsT0FBVCxDQUFpQlIsR0FBakIsRUFBcUJDLEVBQXJCLENBQWY7QUFBQSxTQWpGRjs7QUFtRlhRLGVBQU07QUFDRkMsdUJBQVUsT0FEUixFQUNpQkMsU0FBUSxPQUR6QixFQUNrQ3RFLFFBQU8sT0FEekM7QUFFRlcsc0JBQVMsVUFGUCxFQUVtQjRELFVBQVMsVUFGNUI7QUFHRkMsaUJBQUksUUFIRixFQUdZQyxLQUFJLE9BSGhCLEVBR3lCQyxLQUFJLE1BSDdCLEVBR3FDQyxLQUFJLEtBSHpDO0FBSUZ6RSxpQkFBSTtBQUpGO0FBbkZLO0FBQUEsQzs7QUEyRmYsSUFBTWpCLE9BQUssU0FBTEEsSUFBSyxDQUFDMkYsSUFBRCxFQUFNQyxFQUFOO0FBQUEsV0FBV0QsS0FBS3hELE1BQUwsQ0FBWSxVQUFDMEQsRUFBRCxFQUFLQyxDQUFMO0FBQUEsZUFBVUQsR0FBR0MsQ0FBSCxJQUFNRixFQUFOLEVBQVVDLEVBQXBCO0FBQUEsS0FBWixFQUFvQyxFQUFwQyxDQUFYO0FBQUEsQ0FBWCIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQYXJ0IGZyb20gXCIuLi9wYXJ0XCJcblxuZXhwb3J0IGRlZmF1bHQgb2Q9Pih7XG4gICAgZmlsdGVyOlwiOm5vdChhXFxcXDpleHRMc3QpXCIsXG4gICAgaWQ6KCk9PnVuZGVmaW5lZCxcbiAgICAuLi5zYW1lKFwibGF0aW4sZWEsY3NcIi5zcGxpdChcIixcIiksKHthdHRyaWJzOnt0eXBlZmFjZT1cIlwifX0pPT5vZC50aGVtZS5mb250KHR5cGVmYWNlKSksXG5cbiAgICAuLi5zYW1lKFwibHVtTW9kLGx1bU9mZix0aW50LHNoYWRlXCIuc3BsaXQoXCIsXCIpLCh7YXR0cmliczp7dmFsfX0pPT5wYXJzZUludCh2YWwpLzEwMDAwMCksXG4gICAgdGlkeV9zY2hlbWVDbHI6KHt2YWwsLi4uZWZmZWN0fSk9Pm9kLmRvYy5hc0NvbG9yKG9kLnRoZW1lLmNvbG9yKHZhbCksZWZmZWN0KSxcbiAgICB0aWR5X3NyZ2JDbHI6KHt2YWwsLi4uZWZmZWN0fSk9Pm9kLmRvYy5hc0NvbG9yKHZhbCxlZmZlY3QpLFxuICAgIHN5c0Nscjooe2F0dHJpYnM6e3ZhbH19KT0+dmFsLFxuICAgIHRpZHlfc29saWRGaWxsOih7Y29sb3J9KT0+Y29sb3IsXG4gICAgcm90OnY9PnBhcnNlSW50KHYpLzYwMDAwLFxuXG4gICAgYmxpcDpuPT57XG4gICAgICAgIGNvbnN0IHthdHRyaWJzOntcInI6ZW1iZWRcIjplbWJlZCwgXCJyOmxpbmtcIjp1cmx9fT1uXG4gICAgICAgIGlmKHVybClcbiAgICAgICAgICAgIHJldHVybiB7dXJsfVxuICAgICAgICBjb25zdCBwYXJ0PW9kLiQobikucGFydCgpXG4gICAgICAgIHJldHVybiBuZXcgUGFydChwYXJ0LG9kLmRvYykuZ2V0UmVsKGVtYmVkKVxuICAgIH0sXG5cbiAgICBwcnN0R2VvbSh4KXtcblx0XHRyZXR1cm4geC5hdHRyaWJzLnByc3Rcblx0fSxcblx0cGF0aExzdCh7Y2hpbGRyZW59KXtcblx0XHRjb25zdCBweD14PT5vZC5kb2MuZW11MlB4KHgpXG4gICAgICAgIHJldHVybiBjaGlsZHJlbi5maWx0ZXIoYT0+YS5uYW1lPT1cImE6cGF0aFwiKVxuICAgICAgICAgICAgLnJlZHVjZSgoZCxwYXRoKT0+e1xuICAgICAgICAgICAgICAgIHBhdGguY2hpbGRyZW4uZmlsdGVyKGE9PmEubmFtZSlcbiAgICAgICAgICAgICAgICAgICAgLmZvckVhY2goYT0+e1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoKGEubmFtZS5zcGxpdChcIjpcIikucG9wKCkpe1xuICAgICAgICAgICAgXHRcdFx0Y2FzZSAnbW92ZVRvJzpcbiAgICAgICAgICAgIFx0XHRcdFx0ZC5wdXNoKCdNICcrcHgoYS5jaGlsZHJlblswXS5hdHRyaWJzLngpKycgJytweChhLmNoaWxkcmVuWzBdLmF0dHJpYnMueSkpXG4gICAgICAgICAgICBcdFx0XHRcdGJyZWFrXG4gICAgICAgICAgICBcdFx0XHRjYXNlICdsblRvJzpcbiAgICAgICAgICAgIFx0XHRcdFx0ZC5wdXNoKCdMICcrcHgoYS5jaGlsZHJlblswXS5hdHRyaWJzLngpKycgJytweChhLmNoaWxkcmVuWzBdLmF0dHJpYnMueSkpXG4gICAgICAgICAgICBcdFx0XHRcdGJyZWFrXG4gICAgICAgICAgICBcdFx0XHRicmVha1xuICAgICAgICAgICAgXHRcdFx0Y2FzZSAnY3ViaWNCZXpUbyc6XG4gICAgICAgICAgICBcdFx0XHRcdGQucHVzaCgnTCAnK3B4KGEuY2hpbGRyZW5bMF0uYXR0cigneCcpKSsnICcrcHgoYS5jaGlsZHJlblswXS5hdHRyKCd5JykpKVxuICAgICAgICAgICAgXHRcdFx0XHRkLnB1c2goJ1EgJytweChhLmNoaWxkcmVuWzFdLmF0dHIoJ3gnKSkrJyAnK3B4KGEuY2hpbGRyZW5bMV0uYXR0cigneScpKVxuICAgICAgICAgICAgXHRcdFx0XHRcdCsnICcrcHgoYS5jaGlsZHJlblsyXS5hdHRyKCd4JykpKycgJytweChhLmNoaWxkcmVuWzJdLmF0dHIoJ3knKSkpXG4gICAgICAgICAgICBcdFx0XHRicmVha1xuICAgICAgICAgICAgXHRcdFx0Y2FzZSAnYXJjVG8nOlxuICAgICAgICAgICAgXHRcdFx0XHRkLnB1c2goYEFgKVxuICAgICAgICAgICAgXHRcdFx0YnJlYWtcbiAgICAgICAgICAgIFx0XHRcdGNhc2UgJ2Nsb3NlJzpcbiAgICAgICAgICAgIFx0XHRcdFx0ZC5wdXNoKCdaJylcbiAgICAgICAgICAgIFx0XHRcdGJyZWFrXG4gICAgICAgICAgICBcdFx0XHR9XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRcbiAgICAgICAgICAgIH0sW10pLmpvaW4oXCIgXCIpXG5cdH0sXG4gICAgdGlkeV9jdXN0R2VvbTooe3BhdGhMc3R9KT0+cGF0aExzdCxcblxuICAgIGx2bDp2PT5wYXJzZUludCh2KSxcbiAgICBzcGNQdHM6KHthdHRyaWJzOnt2YWx9fSk9Pm9kLmRvYy5wdDJQeChwYXJzZUludCh2YWwpLzEwMCksXG4gICAgdGlkeV9zcGNBZnQ6KHtzcGNQdHM6YX0pPT5hLFxuICAgIHRpZHlfc3BjQmVmOih7c3BjUHRzOmF9KT0+YSxcblxuICAgIGJ1Rm9udDooe2F0dHJpYnM6e3R5cGVmYWNlfX0pPT50eXBlZmFjZSxcbiAgICBidUNoYXI6KHthdHRyaWJzOntjaGFyfX0pPT5jaGFyLFxuICAgIGJ1U3pQdHM6KHthdHRyaWJzOnt2YWx9fSk9Pm9kLmRvYy5wdDJQeChwYXJzZUludCh2YWwpLzEwMCksXG4gICAgYnVTelBjdDooe2F0dHJpYnM6e3ZhbH19KT0+cGFyc2VJbnQodmFsKS8xMDAwLzEwMCxcbiAgICBidUF1dG9OdW06KHthdHRyaWJzfSk9Pih7Li4uYXR0cmlic30pLFxuICAgIHRpZHlfYnVDbHI6KHtjb2xvcn0pPT5jb2xvcixcblxuICAgIGluZGVudDp2PT5vZC5kb2MuZW11MlB4KHYpLFxuICAgIG1hckw6dj0+b2QuZG9jLmVtdTJQeCh2KSxcblxuICAgIGV4dDooe2F0dHJpYnM6e2N4LGN5fX0pPT4oe3dpZHRoOm9kLmRvYy5lbXUyUHgoY3gpLGhlaWdodDpvZC5kb2MuZW11MlB4KGN5KX0pLFxuICAgIG9mZjooe2F0dHJpYnM6e3gseX19KT0+KHt4Om9kLmRvYy5lbXUyUHgoeCkseTpvZC5kb2MuZW11MlB4KHkpfSksXG4gICAgdGlkeV94ZnJtOih7ZXh0PXt9LG9mZj17fSwgLi4udHJhbnNmb3JtfSk9Pih7Li4uZXh0LCAuLi5vZmYsIC4uLnRyYW5zZm9ybX0pLFxuXG4gICAgLi4uc2FtZShcImxuLGxuQixsblIsbG5MLGxuVCxsblRsVG9CcixsbkJsVG9UclwiLnNwbGl0KFwiLFwiKS5tYXAoYT0+J3RpZHlfJythKSwoe3csLi4ucHJvcHN9KT0+KHsuLi5wcm9wcywgdzpvZC5kb2MuZW11MlB4KHcpfSkpLFxuICAgIC4uLnNhbWUoXCJsZWZ0LHJpZ2h0LHRvcCxib3R0b21cIi5zcGxpdChcIixcIikubWFwKGE9Pid0aWR5XycrYSksKHtsbn0pPT5sbiksXG4gICAgdGlkeV90Y1R4U3R5bGU6KHtjb2xvciwuLi5wcm9wc30pPT4oey4uLnByb3BzLCBzb2xpZEZpbGw6Y29sb3J9KSxcblxuICAgIHRpZHlfbG5SZWY6KHtpZHgsLi4ucGh9KT0+b2QudGhlbWUubG5SZWYoaWR4LHBoKSxcbiAgICB0aWR5X2ZpbGxSZWY6KHtpZHgsLi4ucGh9KT0+b2QudGhlbWUuZmlsbFJlZihpZHgscGgpLFxuICAgIHRpZHlfRWZmZWN0UmVmOih7aWR4LC4uLnBofSk9Pm9kLnRoZW1lLmVmZmVjdFJlZihpZHgscGgpLFxuICAgIHRpZHlfZm9udFJlZjooe2lkeCwuLi5waH0pPT5vZC50aGVtZS5mb250UmVmKGlkeCxwaCksXG5cbiAgICBuYW1lczp7XG4gICAgICAgIHNjaGVtZUNscjpcImNvbG9yXCIsIHNyZ2JDbHI6XCJjb2xvclwiLCBzeXNDbHI6XCJjb2xvclwiLFxuICAgICAgICBwcnN0R2VvbTpcImdlb21ldHJ5XCIsIGN1c3RHZW9tOlwiZ2VvbWV0cnlcIixcbiAgICAgICAgbG5COlwiYm90dG9tXCIsIGxuUjpcInJpZ2h0XCIsIGxuTDpcImxlZnRcIiwgbG5UOlwidG9wXCIsXG4gICAgICAgIHJvdDpcInJvdGF0ZVwiLFxuICAgIH1cbn0pXG5cbmNvbnN0IHNhbWU9KGtleXMsZngpPT5rZXlzLnJlZHVjZSgoZnMsIGspPT4oZnNba109ZngsIGZzKSx7fSlcbiJdfQ==